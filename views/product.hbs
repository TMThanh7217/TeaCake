<div class="container-fluid p-5">
    <div id="content" class="row">
        <div class="col-5">
            <img src="{{product.src}}" class="img-fluid img-thumbnail" alt="">
        </div>
        <div class="col-7 product-info d-flex flex-column justify-content-between">
            <h1 class="h1">{{product.name}}</h1>
            <p>{{product.description}}</p>
            <h2><i class="fa fa-heart mr-2" style="color: palevioletred;"></i><span>{{product.like}}</span></h2>
            <div class="container-fluid m-bg-white product-infor_prices">
                <span class="product-infor_prices-real" style="font-size: 30px; font-weight:bold">${{product.price}}</span>
                <del class="product-infor_prices-org">${{product.price}}</del>
                <span class="product-infor_prices-discount">-20%</span>
            </div>
            
            <div class="container-fluid size-checkbox">
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1">
                    <label class="form-check-label" for="inlineRadio1">S</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2">
                    <label class="form-check-label" for="inlineRadio2">M</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio3" value="option3">
                    <label class="form-check-label" for="inlineRadio3">L</label>
                </div>
            </div>

            <div class="container-fluid addr-info">
                <span class="mesg">Ship to: </span>
                <span class="addr-info_addr">NVC, Q5, TP.HCM, VN, Earth</span>
                <span class="addr-info_change">Change</span>
            </div>

            <div class="container-fluid add-cart">
                <p>Quantity:</p>
                <div class="item_qty input-group">
                    <div class="input-group-prepend">
                        <button id="decBtn" class="btn btn-outline-secondary btn-secondary text-white" type="button" onclick="decreaseBtnClickedEvent()"><i class="fa fa-minus"></i></button>
                    </div>
                    <input id="qtyField" type="number" class="form-control text-center col-1" value="1">
                    <div class="input-group-append">
                        <button id="incBtn" class="btn btn-outline-secondary btn-secondary text-white" type="button" onclick="increaseBtnClickedEvent()"><i class="fa fa-plus"></i></button>
                        <script>
                            function increaseBtnClickedEvent() {
                                var qtyField = document.querySelector("#qtyField");
                                qtyField.value = Number(qtyField.value) + 1; 
                            }

                            function decreaseBtnClickedEvent() {
                                var qtyField = document.querySelector("#qtyField");
                                qtyField.value = qtyField.value > 0 ? Number(qtyField.value) - 1 : 0;     
                            }
                        </script>
                    </div>
                </div>
            </div>
            <button class="btn btn-order btn-TeaCake product-infor__btn-order" data-id={{product.id}} role="button" data-toggle="popover" data-timeout="500" data-trigger="focus" title="Notification" data-content="Add to cart successfully!">Add to cart</button>
        </div>
    </div>
    
    <!--Change the code below-->
    <div class="container p-5">
        <h2>Product information</h2>
        <div class="setBorderDefault"> 
            <div class="row">
                <div class="col-4 setTableDefault">
                    <table class="table tableColor table-borderless">
                        <tr><td>adipisicing elit. Neque, modi!</td></tr>
                        <tr><td>wrzzadipg elit. Neque, modi!</td></tr>
                        <tr><td> nzdipisicing eeque, modi!</td></tr>
                        <tr><td> pisicilit. Nequdi!</td></tr>
                        <tr><td> pisicilit. Nequdi!</td></tr>
                    </table>
                </div>
                <div class="col setTableDefault">
                    <table class="table table-striped table-borderless">
                        <tr><td>Lorem elit. Corrupti, tempora!</td></tr>
                        <tr><td>Lorem elit. Corrupti, tempora!</td></tr>
                        <tr><td>Lorem elit. Corrupti, tempora!</td></tr>
                        <tr><td>Lorem elit. Corrupti, tempora!</td></tr>
                        <tr><td>Lorem elit. Corrupti, tempora!</td></tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="container p-5"> 
        <h2>Description</h2>
        <div class="setBorderDefault">
            <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsa molestias maxime quos consectetur asperiores, quisquam dicta voluptas ad consequatur dignissimos natus vitae accusamus nemo in voluptatibus porro labore officiis unde veritatis commodi voluptates quidem maiores perspiciatis voluptatum. Officia, beatae deserunt omnis vel, aut, dicta quod quas asperiores at distinctio corporis?</p>
            <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Possimus mollitia repellendus fugiat quae, odit quo distinctio deleniti a quas, exercitationem eum esse praesentium non! Necessitatibus repellendus qui ipsum animi ipsam.</p>
        </div>
    </div>
    {{#if is_login}}
    <form class="container p-5 rating-container" action="get_comment" method="post">
        <h2>Ratings and comments</h2>
        <input type="text" name="ProductId" value="{{product.id}}" style="display:none">
        <div class="star-rating d-flex flex-column align-items-center justify-content-center">
            <div class="rotateStar">
                <input type="radio" name="rate" id="5" value="5">
                <label id="start_label" for="5"><i class="fa fa-star"></i></label>
                <input type="radio" name="rate" id="4" value="4">
                <label for="4"><i class="fa fa-star"></i></label>
                <input type="radio" name="rate" id="3" value="3">
                <label for="3"><i class="fa fa-star"></i></label>
                <input type="radio" name="rate" id="2" value="2">
                <label for="2"><i class="fa fa-star"></i></label>
                <input type="radio" name="rate" id="1" value="1">
                <label for="1"><i class="fa fa-star"></i></label>
            </div>
            <div class="my-5 text-center w-100 d-flex flex-column align-items-center justify-content-center">
                <textarea class="form-control p-4 text-dark" id="w3review" name="content" placeholder="Your messenger" rows="4" required></textarea>
                <button type="submit" class="btn btn-order mt-4 w-25"> Comment</button>
            </div>
        </div>     
    </form>
    {{/if}}

    <div class="container p-5">
        <h2>Comment section</h2>
        <div class="setBorderDefault">
            <h4>Rating </h4>
            <div class= "tableRate">
                <div class="chart mb-4">
                    <ul class="numbers">
                        <li><span>100%</span></li>
                        <li><span>50%</span></li>
                        <li><span>0%</span></li>
                    </ul>
                    <ul class="chartBackground">
                        <li>
                            <div class="columns" data-percentage="{{chartStars.[0]}}"></div>
                            <span> 1x <i class="fa fa-star mr-2 starLightColor" style="font-size: 30px;"></i></span>
                        </li>
                        <li>
                            <div class="columns" data-percentage="{{chartStars.[1]}}"></div>
                            <span> 2x <i class="fa fa-star mr-2 starLightColor" style="font-size: 30px;"></i></span>
                        </li>
                        <li>
                            <div class="columns" data-percentage="{{chartStars.[2]}}"></div>
                            <span> 3x <i class="fa fa-star mr-2 starLightColor" style="font-size: 30px;"></i></span>
                        </li>
                        <li>
                            <div class="columns" data-percentage="{{chartStars.[3]}}"></div>
                            <span> 4x <i class="fa fa-star mr-2 starLightColor" style="font-size: 30px;"></i></span>
                        </li>
                        <li>
                            <div class="columns" data-percentage="{{chartStars.[4]}}"></div>
                            <span> 5x <i class="fa fa-star mr-2 starLightColor" style="font-size: 30px;"></i></span>
                        </li>
                    </ul>
                </div>
                <h2 class="total"> Total: <i class="fa fa-star mr-2 starLightColor mt-4"></i><span>{{totalStar}}/{{total}}</span></h2>
            </div>
            
            <h5 class="mt-5"><p>{{size}} comments</p></h5>
            {{#each comments}}
            <hr class="my-2">
            <div class="row">
                <div class="col-2">
                    <img src="../images/avatar/{{User.avt}}.png" class="imgUser" alt="">
                </div>
                <div class="col">
                    <h3>{{User.fname}} {{User.lname}}</h3>
                    <h2 id="displaystar{{id}}"></h2>
                    <script>
                        var t = document.querySelector(`#displaystar{{id}}`);
                        var light = `<i class="fa fa-star mr-2 starLightColor"></i>`;
                        var unlight = `<i class="fa fa-star mr-2 starUnlightColor"></i>`;

                        for (let i = 0; i < {{star}}; i++){
                            t.insertAdjacentHTML("beforeend", light);
                        }
                        for (let i = 0; i < 5 - {{star}}; i++){
                            t.insertAdjacentHTML("beforeend", unlight);
                        }
                    </script>
                    <p>{{content}}</p>
                </div>
            </div>
            {{/each}}
        </div>
    </div>
</div>
<script src="/js/product_detail.js"></script>
<script>
    calculateChart();
</script>